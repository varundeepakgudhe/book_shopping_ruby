<h1>Admin Panel</h1>

<%= link_to "back to admin index", admin_path, class: "btn btn-outline-primary"%>

 <%= link_to "create new user", new_admin_user_path,  class: "btn btn-outline-primary" %>
  <table class="table">
    <thead>
    <tr>
      <th scope="col">User Id</th>
      <th scope="col">Email</th>
      <th scope="col">Username</th>
      <th scope="col">View</th>
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>

    </tr>
    </thead>
    <tbody>
    <% @users.each do |user| %>

      <tr>
        <th scope="row"><%= user.id %></th>
        <td><%= user.email%></td>
        <td><%= user.username%></td>
        <td><%= link_to "View", admin_user_path(user.id) %></td>
        <td><%= link_to "Edit", edit_admin_user_path(user) %></td>
        <% if not user.role == "admin"%>
          <td><%= button_to "Delete", admin_user_path(user), method: :delete, data: { turbo_confirm: 'Are you sure?' }  %></td>
          <% else %>
          <td><%= button_to "Delete", admin_user_path(user), method: :delete,disabled:true, data: { turbo_confirm: 'Are you sure?' }  %></td>
        <% end %>

      </tr>
    <% end %>
    </tbody>
  </table>
